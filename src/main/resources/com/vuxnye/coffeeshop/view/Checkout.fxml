<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="650.0" prefWidth="480.0" style="-fx-background-color: white; -fx-background-radius: 20; -fx-border-color: #E2E8F0; -fx-border-width: 1; -fx-border-radius: 20;" stylesheets="@../css/style.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.vuxnye.coffeeshop.controller.CheckoutController">

    <top>
        <VBox spacing="10.0" style="-fx-padding: 20 30 10 30;">
            <Label style="-fx-font-size: 22px; -fx-font-weight: 900; -fx-text-fill: #1E293B;" text="Xác nhận thanh toán" />
            <Separator />
        </VBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" style="-fx-background-color: transparent; -fx-background: white;" vbarPolicy="AS_NEEDED">
            <content>
                <VBox spacing="20.0" style="-fx-padding: 10 30 20 30;">

                    <VBox spacing="15.0" style="-fx-background-color: #F8FAFC; -fx-padding: 15; -fx-background-radius: 15;">
                        <Label styleClass="label-mini" text="THÔNG TIN KHÁCH HÀNG" />

                        <VBox spacing="5.0">
                            <TextField fx:id="txtCustomerPhone" promptText="Nhập số điện thoại (10 số)..." styleClass="input-field" />
                            <Label fx:id="lblCustomerStatus" style="-fx-font-size: 11px; -fx-font-weight: bold;" wrapText="true" />
                        </VBox>

                        <VBox fx:id="boxCustomerName" managed="false" spacing="5.0" visible="false">
                            <Label styleClass="label-mini" text="TÊN KHÁCH HÀNG MỚI" />
                            <TextField fx:id="txtCustomerName" promptText="Nhập tên khách hàng..." styleClass="input-field" />
                        </VBox>
                    </VBox>

                    <Separator />

                    <VBox spacing="10.0">
                        <Label styleClass="label-mini" text="KHUYẾN MÃI &amp; ĐIỂM" />
                        <HBox spacing="10.0">
                            <TextField fx:id="txtVoucher" promptText="Nhập mã code (nếu có)" styleClass="input-field" HBox.hgrow="ALWAYS" />
                            <Button onAction="#applyVoucher" prefHeight="35" styleClass="btn-blue-sm" text="Áp dụng" />
                        </HBox>
                        <Label fx:id="lblVoucherMessage" style="-fx-font-size: 11px; -fx-font-weight: bold;" visible="false" />

                        <CheckBox fx:id="chkUsePoints" disable="true" style="-fx-font-size: 14px; -fx-text-fill: #1e293b; -fx-cursor: hand;" text="Dùng điểm tích lũy" />
                    </VBox>

                    <Separator />

                    <VBox spacing="10.0">
                        <Label styleClass="label-mini" text="HÌNH THỨC THANH TOÁN" />
                        <ComboBox fx:id="cbPaymentMethod" maxWidth="Infinity" styleClass="input-field" />
                    </VBox>

                </VBox>
            </content>
        </ScrollPane>
    </center>

    <bottom>
        <VBox spacing="15.0" style="-fx-padding: 20 30 30 30; -fx-background-color: #ffffff; -fx-border-color: #E2E8F0; -fx-border-width: 1 0 0 0; -fx-background-radius: 0 0 20 20;">

            <VBox spacing="5.0">
                <HBox>
                    <Label style="-fx-text-fill: #64748B; -fx-font-weight: bold;" text="Tạm tính" />
                    <Pane HBox.hgrow="ALWAYS" />
                    <Label fx:id="lblSubtotal" style="-fx-font-weight: bold;" text="0 đ" />
                </HBox>

                <HBox>
                    <Label style="-fx-text-fill: #EF4444; -fx-font-weight: bold;" text="Giảm giá" />
                    <Pane HBox.hgrow="ALWAYS" />
                    <Label fx:id="lblDiscount" style="-fx-text-fill: #EF4444; -fx-font-weight: bold;" text="- 0 đ" />
                </HBox>

                <HBox alignment="CENTER_LEFT" style="-fx-padding: 10 0 0 0;">
                    <Label style="-fx-font-size: 16px; -fx-font-weight: 900;" text="THÀNH TIỀN" />
                    <Pane HBox.hgrow="ALWAYS" />
                    <Label fx:id="lblTotal" style="-fx-font-size: 24px; -fx-font-weight: 900; -fx-text-fill: #4A90E2;" text="0 đ" />
                </HBox>
            </VBox>

            <HBox spacing="15.0">
                <Button maxWidth="Infinity" onAction="#closeWindow" prefHeight="50.0" style="-fx-background-color: #F1F5F9; -fx-text-fill: #64748B; -fx-font-weight: bold; -fx-background-radius: 10; -fx-cursor: hand;" text="HỦY BỎ" HBox.hgrow="ALWAYS" />
                <Button maxWidth="Infinity" onAction="#confirmCheckout" prefHeight="50.0" styleClass="btn-primary" text="XÁC NHẬN &amp; IN" HBox.hgrow="ALWAYS" />
            </HBox>
        </VBox>
    </bottom>

</BorderPane>